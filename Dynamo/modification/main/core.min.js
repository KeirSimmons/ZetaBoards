var dynamo={setting:{version:{x:8,y:4},developer:!1,debug:!1,path:"http://dynamo.viralsmods.com/",support_path:"http://support.viralsmods.com/"},server:{},queries:[],username:null,zbid:null,gid:null,new_member:0,current_id:0,time:0,module:{loading:!1,attempts:0,server_call:function(e,t){if(dynamo.module.loading)dynamo.module.queue(e,t);else if(dynamo.module.load_state(!0),4==e){var o=dynamo.setting.path+"main/guest.php",n={url:location.href,cid:dynamo_options.cid,x:(new Date).getTime()};t=$.extend(!0,{},n,t),dynamo.toolbox.log("(guest) Data to be sent to server:",t),o=o+"?"+$.param(t),dynamo.toolbox.log("Final server call URL:",o),$.getScript(o)}else if(3==e){var n={username:dynamo.toolbox.get_username(),zbid:dynamo.toolbox.get_zbid(),gid:dynamo.toolbox.get_gid(),url:location.href,cid:dynamo_options.cid,m:"refresh",x:(new Date).getTime()};t=$.extend(!0,{},n,t),dynamo.toolbox.log("Data to be sent to server:",t);var o=dynamo.setting.path+"main/tasks.php?"+$.param(t);dynamo.toolbox.log("Final server call URL:",o),$.getScript(o)}else{var o=1==e?dynamo.setting.path+"main/core.php":dynamo.setting.path+"main/tasks.php",a=dynamo.toolbox.cookie.get("dynamo_password_"+dynamo.toolbox.get_zbid());if(a.length||1===dynamo.new_member){a.length&&dynamo.toolbox.cookie.set("dynamo_password_"+dynamo.toolbox.get_zbid(),a),dynamo.toolbox.log((1===dynamo.toolbox.new_member?"You have been recognised as a new member to Dynamo and will be registered now.":"All initial checks completed successfully.")+" Calling server...");var i=function(){var e=$("#foot_wrap, #foot_wrap div, #foot_wrap div img"),t=$("#foot_wrap div img"),o=parseInt(t.css("width"),10),n=parseInt(t.css("height"),10),a=o/n,i=1,d="";return e.each(function(){i&=$(this).is(":visible"),d+=i,i&=1===+$(this).css("opacity"),d+=i,i&="hidden"!==$(this).css("visibility"),d+=i}),i&=o>=5,d+=i,i&=a>=2.5,d+=i,i&=3.1>=a,d+=i,i||(window.dynamoHelp=function(){prompt("Please post the following error code to http://support.viralsmods.com so we can resolve this error for you!",btoa([location.href,dynamo.toolbox.get_username(),dynamo.toolbox.get_zbid(),$("#foot_wrap").is(":visible"),$("#foot_wrap").css("opacity"),$("#foot_wrap").css("visibility"),$("#foot_wrap div").is(":visible"),$("#foot_wrap div").css("opacity"),$("#foot_wrap div").css("visibility"),$("#foot_wrap div img").is(":visible"),$("#foot_wrap div img").css("opacity"),$("#foot_wrap div img").css("visibility"),parseInt($("#foot_wrap div img").css("width"),10),parseInt($("#foot_wrap div img").css("height"),10),d,i]))}),i}(),n={username:dynamo.toolbox.get_username(),zbid:dynamo.toolbox.get_zbid(),gid:dynamo.toolbox.get_gid(),url:location.href,cid:dynamo_options.cid,password:a,ad:i,developer:dynamo.setting.developer,x:(new Date).getTime()};t=$.extend(!0,{},n,t),dynamo.toolbox.log("Data to be sent to server:",t),o=o+"?"+$.param(t),dynamo.toolbox.log("Final server call URL:",o),$.getScript(o)}else dynamo.module.attempts?(dynamo.toolbox.log("Max attempts reached for calling server."),dynamo.toolbox.log({password:a,new_member:dynamo.new_member})):(dynamo.toolbox.log("Password was not found, attempting to locate it."),$.get(main_url+"msg/?c=10",function(o){var n=$("input[name=new_folder]",o),a="";n.each(function(){/^dd\/\/.{8}$/.test($(this).val())&&(a=$(this).val())}),a.length?(dynamo.toolbox.log("Password was found, re-attempting to call server."),a=a.split("dd//")[1],dynamo.toolbox.cookie.set("dynamo_password_"+dynamo.toolbox.get_zbid(),a)):(dynamo.toolbox.log("Password could not be located, must be a new member to Dynamo (or tag deleted)."),dynamo.new_member=1),dynamo.module.attempts++,dynamo.module.load_state(!1),dynamo.module.server_call(e,t)}))}},current_queue:[],queue:function(e,t){dynamo.module.current_queue[dynamo.module.current_queue.length]=[e,t]},load_state:function(e){if(dynamo.module.loading=e,!e&&dynamo.module.current_queue.length){var t=dynamo.module.current_queue.shift();dynamo.module.server_call(t[0],t[1])}},loaded:[],processing:{},load:function(e,t){if(dynamo.toolbox.in_array(e,dynamo.module.loaded))dynamo.toolbox.log("Requested loading of script file: "+e+". File already loaded, continuing..."),"function"==typeof t?t():dynamo.module.server_call(2,t);else if(e in dynamo.module.processing)dynamo.toolbox.log("Requested loading of script file: "+e+". File in loading queue, please wait..."),$("body").on("dynamo_script_loaded-"+e,function(){dynamo.toolbox.log("File "+e+" has now loaded, processing queue items (this will appear for every item in queue)."),"function"==typeof t?t():dynamo.module.server_call(2,t)});else{if(/\.js$/.test(e))var o=dynamo.setting.path+"modules/"+e;else if("developer"in dynamo_options&&dynamo_options.developer)var o=dynamo.setting.path+"modules/"+e+"/core.js";else switch(e){case"acp":var o="http://z3.ifrm.com/142/141/0/p502187/core.min.js";break;case"currency":var o="http://z3.ifrm.com/142/141/0/p502188/core.min.js";break;case"notifications":var o="http://z3.ifrm.com/142/141/0/p502342/core.min.js";break;case"lottery":var o="http://z3.ifrm.com/142/141/0/p502575/core.min.js";break;case"level":var o="http://z3.ifrm.com/142/141/0/p502881/core.min.js";break;case"online":var o="http://z3.ifrm.com/142/141/0/p507017/core.min.js";break;case"member_tag":var o="http://z3.ifrm.com/142/141/0/p510746/core.min.js";break;case"post":var o="http://z3.ifrm.com/142/141/0/p511064/core.min.js"}dynamo.toolbox.log("Requested loading of script file: "+e+". File URL: ",o),dynamo.module.processing[e]=!0,$.getScript(o,function(){dynamo.toolbox.log("Script file "+e+" has been loaded."),dynamo.module.loaded[dynamo.module.loaded.length]=e,delete dynamo.module.processing[e],$("body").trigger("dynamo_script_loaded-"+e),e in dynamo&&"__construct"in dynamo[e]&&dynamo[e].__construct(),"function"==typeof t?t():dynamo.module.server_call(2,t)})}},callback:function(e){if(dynamo.module.load_state(!1),dynamo.toolbox.log("Returned data from server call:",e),dynamo.time=e.time,"notice"in e&&("notice_data"in e?dynamo.tip.preloaded.show(e.notice,e.notice_data):dynamo.tip.preloaded.show(e.notice)),"info"in e&&"notification_count"in e.info){var t=e.info.notification_count;if($("#dynamo_drop a strong small").text(dynamo.toolbox.format_number(t)),t>0){{e.info.notifications}dynamo.module.load("notifications",function(){dynamo.notifications.show(e.info.notifications)})}}if(("cb"in e&&"dynamo.toolbox.ini_return"!=e.cb||!("cb"in e))&&dynamo.toolbox.update_profiles(e),"cb"in e){for(var o=e.cb.split("."),n=window,a=0;a<o.length;a++)n=n[o[a]];n(e)}},load_returns:function(e){"afterload"in e.settings&&$.getScript(dynamo.setting.path+"afterload/load.php?load="+dynamo.server.settings.afterload)}},tip:{toolbox:{default_options:{},add_classes:function(e,t){t="string"==typeof t?[t]:t,e.style="style"in e?e.style:{};var o="classes"in e.style?e.style.classes.split(" "):[];return e.style.classes=o.concat(t).join(" "),e},text_replace:function(e,t){return"text_replaced"in e&&e.text_replaced||("content"in e&&("text"in e.content&&(e.content.text=dynamo.toolbox.dynamic_text_replace(e.content.text,t)),"title"in e.content&&"text"in e.content.title&&(e.content.title.text=dynamo.toolbox.dynamic_text_replace(e.content.title.text,t))),e.text_replaced=!0),e},clean:function(e){return"cleaned"in e&&e.cleaned||("content"in e||(e.content={},e.content.text=e.message,"title"in e&&(e.content.title={text:e.title})),e.cleaned=!0,delete e.message,delete e.title),e},show:function(e,t){void 0!==t&&null!==t&&(t=$.extend(!0,{},dynamo.tip.toolbox.default_options,t),e="object"==typeof e?e:$(e),e.qtip(t))},hide:function(e){$("#dynamo_msg_"+e).closest(".qtip").qtip("destroy");var t=dynamo.toolbox.cookie.get("dynamo_hiddenmsg_"+dynamo.toolbox.get_zbid());t=t.length?t.split(","):[],t[t.length]=e,t=t.join(","),dynamo.toolbox.cookie.set("dynamo_hiddenmsg_"+dynamo.toolbox.get_zbid(),t,1)}},preloaded:{msgs:{"default-1":{can_hide:!1,show_id:!1,title:"Notification"},"default-2":{can_hide:!0,show_id:!0,title:"Error",style:{classes:"qtip-error"},support:!0},"default-3":{can_hide:!1,show_id:!1,position:{my:"left center",at:"right center"}},"default-4":{can_hide:!1,show_id:!1,position:{my:"left center",at:"right center"},show:{event:!1,ready:!0},hide:{event:!1},style:{classes:"qtip-error"}},"id-db-error":{type:2,message:"There was an error when trying to access the Dynamo records, please try again later."},"id-0":{type:2,message:"An error occurred when attempting to record the previous error. Please try again later."},"id-1":{type:4,message:"Your topic needs a title!",selector:"input[name=title]"},"id-2":{type:4,message:"Your topic needs some content!",selector:"#c_post-text",position:{my:"top center",at:"bottom center"}},"id-3":{type:4,message:"Your reply is empty!",selector:"#c_post-text",position:{my:"top center",at:"bottom center"}},"id-4":{type:4,message:"Your reply is empty!",selector:"#fast-reply textarea",position:{my:"bottom center",at:"top center"}},"id-5":{type:2,message:"Dynamo could not be loaded. Please try again later."},"id-6":{type:2,message:"Dynamo has not been setup properly for this forum."},"id-7":{type:2,message:"Dynamo has not been setup properly for this forum.%ADMIN% This could be due to a recent change in your domain.%ADMIN%"},"id-8":{type:1,message:"Your account could not be validated for use with Dynamo. An administrator will send you details on how to refresh your account shortly.",title:"Account Frozen"},"id-9":{type:1,message:"<div id='dynamo_account-frozen'>Your Dynamo account has been frozen. Please click <a href='javascript:dynamo.toolbox.password.pin.prompt();'>here</a> to enter your 4 digit pin (given to you by an Administrator) to re-activate it.</div>",title:"Account Frozen",can_hide:!0},"id-10":{type:1,message:"Your Dynamo account has been frozen. Please come back in %DATA[to_wait,time]% to enter your 4 digit pin to re-activate it (you have made too many false attempts today).",title:"Account Frozen",can_hide:!0},"id-11":{type:2,message:"The Dynamo system could not be accessed. Please click <a href='javascript:dynamoHelp();'>here</a> to resolve this.",title:"Error"},"id-12":{type:1,message:"The Dynamo system is offline. Please check back later.",title:"Dynamo Offline",can_hide:!0},"id-13":{type:2,message:"Your account does not need refreshing.",title:"Account Refresh Error",can_hide:!1},"id-14":{type:2,message:'You have run out of attempts for entering your pin. Please try again in %DATA[to_wait,time]% and contact an <a href="'+main_url+'profile/admin">Administrator</a> for more assistance.',title:"Account Refresh Error",can_hide:!1},"id-15":{type:1,message:'Your account has been refreshed successfully. Please <a href="javascript:location.reload();">reload</a> the page so Dynamo can complete the process.',title:"Account Refresh Successful"},"id-16":{type:1,message:"The pin you entered was incorrect. Please click <a href='javascript:dynamo.toolbox.password.pin.prompt();'>here</a> to enter your 4 digit pin again.",title:"Account Refresh Error"},"id-17":{type:1,message:"The pin you entered was incorrect. Please try again in %DATA[to_wait,time]% as you have run out of attempts for now.",title:"Account Refresh Error"},"id-18":{type:2,message:"The requested page could not be loaded as it either does not exist or you do not have permission to access it."},"id-19":{type:5,message:"The requested page could not be loaded. Please try again later."},"id-20":{type:3,message:"Premium Only",selector:".dynamo_field_premium_disabled",position:{my:"center center",at:"center center"},hide:{fixed:!0}},"id-21":{type:2,message:"The requested advert could not be found. Please try again later."},"id-22":{type:2,message:"The requested advert could not be found. Please try again later."},"id-36":{type:2,message:"The requested page could not be loaded as it either does not exist or you do not have permission to access it."},"id-37":{type:2,message:"The requested page could not be loaded as it either does not exist or you do not have permission to access it."},"id-41":{type:1,message:"You have now entered debug mode. Please refresh the page.<br /><a href='javascript:dynamo.toolbox.debug.off();'>[Turn off</a>]",title:"Debug Mode"},"id-42":{type:1,message:"You have now exited debug mode. Please refresh the page.<br /><a href='javascript:dynamo.toolbox.debug.on();'>[Turn on</a>]",title:"Debug Mode"},"id-43":{type:2,message:"It was not possible to link your account with the Dynamo system. Please try again later.",title:"Dynamo Link Error"},"id-45":{type:2,message:"Dynamo could not load the requested resource, please try again later."}},add_msg:function(e,t){if("object"==typeof e)for(var o=e.length,n=0;o>n;n++)dynamo.tip.preloaded.add_msg(e[n][0],e[n][1]);else dynamo.tip.preloaded.msgs["id-"+e]=t},show:function(id,data){if("object"==typeof id){var current_id=id.pop();id.length&&dynamo.tip.preloaded.show(id),id=current_id}data=dynamo.toolbox.is_defined(data)?data:{};var msgs=dynamo.tip.preloaded.msgs;if("id-"+id in msgs){var msg=msgs["id-"+id];if(1==msg.type||2==msg.type){var options=$.extend(!0,{},msgs["default-"+msg.type],msg),hidden=dynamo.toolbox.cookie.get("dynamo_hiddenmsg_"+dynamo.toolbox.get_zbid());if(!options.can_hide||!dynamo.toolbox.in_array(id,hidden.split(","))){if("support"in options&&options.support&&$.zb.admin){var queries=$.param({id:id,cid:dynamo.cid,zbid:dynamo.toolbox.get_zbid()});options.message+=" Please contact the <a href="+dynamo.setting.support_path+"?"+queries+">Dynamo Support forum</a> for more information and help."}with(options.can_hide===!0&&(options.message+='<div class="dynamo_tooltip_hide">[<a href=\'javascript:dynamo.tip.toolbox.hide('+id+");'>Don't show again</a>]</div>",options.message='<div id="dynamo_msg_'+id+'">'+options.message+"</div>"),options.show_id===!0&&(options.title=("title"in options?options.title+" ":"")+"#"+id+"-"+dynamo.cid),options=dynamo.tip.toolbox.clean(options),options=dynamo.tip.toolbox.text_replace(options,data))delete type,delete can_hide,delete show_id,delete support;dynamo.tip.growl.show(options)}}else if(3==msg.type||4==msg.type){var options=$.extend(!0,{},msgs["default-"+msg.type],msg);options=dynamo.tip.toolbox.clean(options),options=dynamo.tip.toolbox.text_replace(options,data),dynamo.tip.tooltip.show(options)}else if(5==msg.type){var options=msg,message=dynamo.toolbox.dynamic_text_replace(options.message,data),title="title"in options?dynamo.toolbox.dynamic_text_replace(options.title):null,width="width"in options?options.width:null;dynamo.tip.prompt.content(message,title,width)}}else dynamo.tip.growl.show({message:"Unknown error",title:"Error #"+id})}},growl:{id:0,make_growl:function(e){var t=dynamo.tip.growl.id++,o=$(".qtip.dynamo_jgrowl:visible:last"),n="persistent"in e?e.persistent:!0;"persistent"in e&&delete e.persistent;var a={id:"dynamo-notify-"+t,content:{text:"",title:{text:"",button:!0}},position:{my:(o.length,"bottom right"),at:o.length?"top right":"bottom right",target:o.length?o:$(window),adjust:{y:-5,x:o.length?0:-5},effect:function(e,t){$(this).animate(t,{duration:200,queue:!1}),e.cache.finalPos=t}},show:{event:!1,ready:!0,effect:function(){$(this).stop(0,1).fadeIn(400)},delay:0,persistent:n,solo:!1},hide:{event:!1,effect:function(e){$(this).stop(0,1).fadeOut(400).queue(function(){e.destroy(),dynamo.tip.growl.updatePos()})}},events:{render:function(e,t){dynamo.tip.growl.timer.call(t.elements.tooltip,e)}},style:{classes:"qtip-shadow qtip-rounded",width:250,tip:!1}};return e=$.extend(!0,{},a,e),$("#dynamo_notification_holder").size()||$("body").append($("<div>").attr("id","dynamo_notification_holder")),e=dynamo.tip.toolbox.add_classes(e,"dynamo_jgrowl"),dynamo.tip.toolbox.show("#dynamo_notification_holder",e),$("#dynamo_notification_holder").removeData("qtip"),t},updatePos:function(){var e,t=$(".qtip.dynamo_jgrowl"),o=t.outerWidth();t.each(function(t){var n=$(this).data("qtip");n.options.position.target=t?[e.left+o,e.top]:[$(window).width()-5,$(window).height()+$("body").scrollTop()],n.set("position.my","bottom right"),n.set("position.at","bottom right"),e=n.cache.finalPos})},timer:function(e){var t=$(this).data("qtip"),o=1e4;t.get("show.persistent")!==!0&&(clearTimeout(t.timer),"mouseover"!==e.type&&(t.timer=setTimeout(t.hide,o)))},show:function(e){e=dynamo.tip.toolbox.clean(e),e=dynamo.tip.toolbox.text_replace(e,{});var t=$("a",$("<div>"+e.content.text+"</div>")),o=dynamo.tip.growl.make_growl(e);return 1==t.size()?!function(e){$("#qtip-dynamo-notify-"+o).bind("click",function(){location.href=e,$(this).qtip("hide")})}(t.prop("href")):$("#qtip-dynamo-notify-"+o+" a").each(function(){$(this).bind("click",function(){$("#qtip-dynamo-notify-"+o).qtip("hide")})}),o}},prompt:{title:"User CP",ini:function(e,t){var o=$("#qtip-prompt").size();if(o)dynamo.tip.prompt.load(e,t);else{var n={id:"prompt",content:{text:'<div class="dynamo_menu"></div><div class="dynamo_content"><div class="dynamo_loader"></div></div><div style="clear:both;"></div>',title:{text:dynamo.tip.prompt.title,button:!0}},position:{my:"center",at:"center",target:$(window)},show:{solo:!1,ready:!0,effect:function(){$(this).stop(0,1).fadeIn(400)},delay:0,modal:!0},hide:{event:!1,effect:function(e){$(this).stop(0,1).fadeOut(400).queue(function(){e.destroy()})}},events:{hide:function(e,t){t.destroy()},render:function(){$("#qtip-prompt a.qtip-close").attr("title","Close Dynamo"),dynamo.tip.prompt.menu.create(function(){$(".dynamo_menu_header").unbind("click").bind("click",function(){var e=$(this),t=e.next();t.is(":visible")?(t.find(".dynamo_tab_holder").each(function(){$(this).is(":visible")&&$(this).stop().slideFadeToggle("fast",function(){dynamo.tip.prompt.reposition(!0)})}),t.stop().slideFadeToggle("fast",function(){dynamo.tip.prompt.reposition(!0)})):(e.parent().parent().find(".dynamo_tab_holder:visible").stop().slideFadeToggle("fast",function(){dynamo.tip.prompt.reposition(!0)}),t.stop().slideFadeToggle("fast",function(){dynamo.tip.prompt.reposition(!0)}))}),$(".dynamo_menu_header").prepend("<span>></span> "),$(".dynamo_tab").bind("click",function(){dynamo.tip.prompt.load($(this))}),dynamo.tip.prompt.load(e,t)})}},style:{classes:"qtip-rounded qtip-shadow dynamo_prompt",width:550}};dynamo.tip.toolbox.show("body",n)}},load:function(){if(!$("#qtip-prompt").size())return!1;var e=void 0,t=void 0;for(var o in arguments)"string"==typeof arguments[o]?e=$(arguments[o]):arguments[o]instanceof jQuery?e=arguments[o]:"object"==typeof arguments[o]&&(t=arguments[o]);var n=dynamo.toolbox.is_defined(e),a=dynamo.toolbox.is_defined(t);n&&!a?(dynamo.tip.prompt.menu.focus_on(e),t=dynamo.tip.prompt.menu.get_data(e)):n&&a&&(dynamo.tip.prompt.menu.focus_on(e),t=$.extend(!0,dynamo.tip.prompt.menu.get_data(e),t)),dynamo.tip.prompt.loading();var i=function(e){return function(){"load"in e&&delete e.load,dynamo.toolbox.log(e),$.param(e).length&&dynamo.module.server_call(2,e)}};"load"in t?dynamo.module.load(t.load,i(t)):i(t)()},menu:{loaded:!1,html:"",create:function(e){dynamo.tip.prompt.menu.loaded?($(".dynamo_menu").replaceWith(dynamo.tip.prompt.menu.html),dynamo.tip.prompt.menu.html=dynamo.tip.prompt.menu.html.clone(!0),e()):$.getScript(dynamo.setting.path+"menus/menu.php?menu="+dynamo.server.settings.menujs,function(){dynamo.tip.prompt.menu.loaded=!0;var t,o=$("<div>").addClass("dynamo_menu"),n=dynamo.server.modules;for(var a in n)t=n[a],t.id in menu_info&&menu_info[t.id].appendTo(o);$(".dynamo_menu").replaceWith(o),dynamo.tip.prompt.menu.html=o.clone(!0),e()})},focus_on:function(e){for($(".dynamo_tab_holder").hide(),$(".dynamo_tab_selected").removeClass("dynamo_tab_selected"),e.addClass("dynamo_tab_selected");;){if(e=e.parent().closest(".dynamo_tab_holder"),!e.size())break;e.show()}dynamo.tip.prompt.reposition(!0)},get_data:function(e){for(var t=e.data();;){if(e=e.parent().closest(".dynamo_tab_holder"),!e.size())break;t=$.extend(!0,{},t,e.prev().data())}return t}},loading:function(){$(".dynamo_loader").remove(),$(".dynamo_content").html('<div class="dynamo_loader"></div>')},content:function(e,t,o){if(0==$("#qtip-prompt").size());else{dynamo.toolbox.is_defined(t)&&$("#qtip-prompt-title").text(dynamo.tip.prompt.title+" - "+t);var n=$(window).width();o=dynamo.toolbox.is_defined(o)?o:550,o=o>.9*n?.9*n:o;var a=$("#qtip-prompt"),i=a.width(),d=(o-i)/2;i==o?("function"==typeof e?e():a.find(".dynamo_content").html(e),dynamo.tip.prompt.reposition(!0)):(dynamo.tip.prompt.loading(),a.animate({width:o,left:"-="+d},"fast",function(){"function"==typeof e?e():a.find(".dynamo_content").html(e),dynamo.tip.prompt.reposition(!0)}))}},reposition:function(){$("#qtip-prompt").size()&&(arguments.length&&arguments[0]?$("#qtip-prompt").qtip("api").reposition():$("#qtip-prompt").qtip("api").reposition(null,!1))}},tooltip:{show:function(options){options=dynamo.tip.toolbox.clean(options),options=dynamo.tip.toolbox.text_replace(options),options=dynamo.tip.toolbox.add_classes(options,"dynamo_tooltip qtip-rounded qtip-shadow");var selector=options.selector;with(options)delete type,delete can_hide,delete show_id,delete selector;dynamo.tip.toolbox.show(selector,options)},reposition:function(){$(".dynamo_tooltip").size()&&$(".dynamo_tooltip").qtip("api").reposition(null,!1)}}},form:{id:0,default_field:{field:{size:5},rules:{},tip:{type:3,style:{width:"200px"},hide:{fixed:!0,delay:100}}},create:function(e,t){t=$.extend(!0,{},{submit:{value:"Submit",show:!0,inline:!0,to_call:function(){return!0}},tooltips:!0},t);var o,n,a,i=t.fields.length,d=dynamo.form.id++,s=$("<form>");s.attr("id","dynamo_form_id-"+d).data({id:d,data:t});var r=$("<table>");if(s.bind("submit",function(e){e.preventDefault(),dynamo.form.validate($(this))}),"header"in t){var l=$("<tr>");if("object"==typeof t.header)for(h in t.header)m=$("<th>"),m.html(t.header[h]).appendTo(l);else{var m=$("<th>").html(t.header).attr("colspan",2);l.append(m)}l.appendTo(r)}var p=[];for(o=0;i>o;o++){switch(n=$.extend(!0,{},dynamo.form.default_field,t.fields[o]),n.field.type){case"input":switch(a=$("<input>"),n.field.spec){case"text":a.attr("type","text");break;case"url":a.attr("type","url");break;case"number":a.attr("type","number");break;case"search":a.attr("type","search"),t.fields[o].rules.minlength="minlength"in n.rules?n.rules.minlength:3;break;case"hidden":a.attr("type","hidden");break;default:a.attr("type","text")}"placeholder"in n.content&&a.attr("placeholder",n.content.placeholder),"value"in n.content&&a.val(n.content.value);break;case"select":var c,u=n.field.options.length;if(u){a=$("<select>"),"spec"in n.field&&"multiple"==n.field.spec&&a.attr("multiple","multiple").attr("size",n.field.size),$("<option>").val(-1).text("blank"in n.content?n.content.blank:"").appendTo(a);for(c=0;u>c;c++){var y=n.field.options[c],f=$("<option>").val(y[0]).text(y[1]);3==y.length&&y[2]&&f.attr("selected","selected"),f.appendTo(a)}}break;case"textarea":a=$("<textarea>"),"placeholder"in n.content&&a.attr("placeholder",n.content.placeholder),"value"in n.content&&a.val(n.content.value)}"premium"in n.field&&n.field.premium&&(dynamo.server.settings.premium||a.addClass("dynamo_field_premium_disabled").focus(function(){$(this).blur()}),a.addClass("dynamo_field_premium"),n.content.desc=("desc"in n.content?n.content.desc+"<br /><br />":"")+"This is a premium only feature."),a.attr("name",n.field.name).attr("tabindex",o+1),label_holder=$("<td>").addClass("c_desc").css("width","50%").html("<span>"+n.content.label+":</span>"),"desc"in n.content&&(p[p.length]=d+"-"+n.field.name,options=$.extend(!0,{},dynamo.form.default_field.tip,"tip"in n?n.tip:{}),options.selector="#dynamo_formhelp-"+d+"-"+n.field.name,options.message=n.content.desc,dynamo.tip.preloaded.add_msg("formhelp-"+d+"-"+n.field.name,options),label_holder.attr("id","dynamo_formhelp-"+d+"-"+n.field.name),label_holder.addClass("dynamo_helper")),"input"==n.field.type&&"hidden"==n.field.spec?r.find("td:last").append(a):r.append($("<tr>").append(label_holder).append($("<td>").css("width","50%").append(a)))}var g=$("<input>").attr("type","submit").val(t.submit.value).attr("tabindex",o+1);t.submit.show===!0?t.submit.inline===!0?r.find("td:last").append(" ").append(g):r.append($("<tr>").append("<td>").append($("<td>").append(g))):r.find("td:last").append(g.addClass("hide"));var _=$("<tr>");_.append($("<td>").addClass("c_foot").attr("colspan",2)),_.appendTo(r),r.append(),r.appendTo(s),e=e instanceof jQuery?e:$(e),e.empty(),s.appendTo(e),dynamo.tip.preloaded.show(20);for(var b=0;b<p.length;b++)dynamo.tip.preloaded.show("formhelp-"+p[b]);$("#dynamo_form_id-"+d).find("input,textarea").eq(0).focus(),dynamo.tip.prompt.reposition(!0)},validate:function(e,t){t=void 0!==t&&null!==t?!1:!0;var o,n=e.data("id"),a=e.data("data"),i=a.fields.length,d=$("#dynamo_form_id-"+n),s=!0,r={};for(o=0;i>o;o++){var l=a.fields[o],m=d.find("input,select,textarea").filter("[name="+l.field.name+"]"),p="";if(m.size()){var c=m.val();if("select"==l.field.type&&"object"==typeof c&&c.length){var u,y=c.length;for(u=0;y>u;u++)if(-1==c[u]){c.splice(u,1);break}}else"select"==l.field.type&&"string"==typeof c&&"-1"==c&&(c="");var f="rules"in l?l.rules:{};if(!(!p.length&&"required"in f&&f.required)||"premium"in l.field&&l.field.premium&&!dynamo.server.settings.premium||("select"==l.field.type?0==c.length&&(p="This field is required"):c.length||(p="This field is required")),p.length||"input"!=l.field.type||"number"!=l.field.spec||/^ *-?\d* *$/.test(+c)||(p="You must enter a number"),p.length||"input"!=l.field.type||"url"!=l.field.spec||/^(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-‌​\.\?\,\'\/\\\+&%\$#_]*)?$/i.test(c)||(p="You must enter a URL"),!p.length&&("minlength"in f||"maxlength"in f)){var g="minlength"in f?+f.minlength:-1,h="maxlength"in f?+f.maxlength:-1;c="select"==l.field.type?c:$.trim(c),g==h&&0!=h&&c.length!=h?p="select"==l.field.type?"Select exactly "+g+" options":"Enter exactly "+g+" character"+(1==g?"":"s"):-1!=g&&c.length<g?p="select"==l.field.type?"Select at least "+g+" option"+(1==g?"":"s"):"Enter at least "+g+" character"+(1==g?"":"s"):-1!=h&&c.length>h&&(p="select"==l.field.type?"Select up to "+h+" option"+(1==h?"":"s"):"Enter up to "+h+" character"+(1==h?"":"s"))}!p.length&&("min"in f||"max"in f)&&"select"!=l.field.type&&(c=+c,"min"in f&&c<+f.min?p="Must be greater than or equal to "+dynamo.toolbox.format_number(f.min):"max"in f&&c>+f.max&&(p="Must be less than or equal to "+dynamo.toolbox.format_number(f.max))),!p.length&&"fn"in f&&(p=f.fn(c));var _="select"==l.field.type?"change":"keyup";if(p.length||m.unbind(_).qtip("destroy"),p.length){if(s=!1,a.tooltips)if("qtip"in m.data())m.qtip("option","content.text",p);else{var b={my:"position"in a?a.position.my:"left center",at:"position"in a?a.position.at:"right center"};m.unbind(_).qtip("destroy").qtip({content:{text:p},position:b,show:{event:!1,ready:!0,solo:!1},hide:!1,style:{classes:"qtip-error qtip-shadow"},events:{hide:function(e,t){t.qtip("destroy"),m.unbind(_)}}}).bind(_,{that:e},function(e){dynamo.form.validate(e.data.that,0)})}m.focus();break}r[m.attr("name")]=c}}s===!0&&t===!0&&a.submit.to_call(r)}},table:{id:0,create:function(e,t){var o={colspan:2,footer:!0,rows:[]};t=$.extend(!0,{},o,t);var n,a,i,d,s,r,l,m=t.rows.length,p=[],c=dynamo.table.id++,u=$("<table>");u.attr("id","dynamo_table_id-"+c).data({id:c,data:t}).addClass("dynamo_table");var y,f={cells:[]},g={content:"",style:{classes:"",width:"auto"},type:"td",tip:{type:3,position:{my:"left center",at:"right center"},style:{width:"200px"},hide:{fixed:!0,delay:100},underline:!0}};for(n=0;m>n;n++){for(a=$.extend(!0,{},f,t.rows[n]),l=a.cells.length,i=$("<tr>"),s=0;l>s;s++)r=$.extend(!0,{},g,a.cells[s]),d=$("<"+r.type+">"),d.attr("id","dynamo_table_cell-"+c+"-"+n+"-"+s).html("<span>"+r.content+"</span>"),"desc"in r&&r.desc.length&&(p[p.length]=c+"-"+n+"-"+s,r.tip.underline&&d.addClass("dynamo_helper"),y=$.extend(!0,{},g.tip,"tip"in r?r.tip:{}),y.selector="#dynamo_table_cell-"+c+"-"+n+"-"+s,y.message=r.desc,delete y.underline,dynamo.tip.preloaded.add_msg("tablehelp-"+c+"-"+n+"-"+s,y)),r.style.classes.length&&d.addClass(r.style.classes),"auto"!=r.style.width&&d.css("width",r.style.width),"align"in r.style&&d.css("text-align",r.style.align),"colspan"in r&&d.attr("colspan",r.colspan),i.append(d);u.append(i)}"footer"in t&&t.footer&&"colspan"in t&&(i=$("<tr>"),i.append($("<td>").addClass("c_foot").attr("colspan",t.colspan)),u.append(i)),e=e instanceof jQuery?e:$(e),e.empty(),u.appendTo(e);for(var h=0;h<p.length;h++)dynamo.tip.preloaded.show("tablehelp-"+p[h]);dynamo.tip.prompt.reposition(!0)}},toolbox:{ini:function(){if($("#offline_message").size())return!1;$("body").trigger("dynamo_onbeforeload"),dynamo.cid=dynamo_options.cid,dynamo.toolbox.menu.preload(),"developer"in dynamo_options&&dynamo_options.developer&&(dynamo.setting.developer=!0,dynamo.setting.path+="developer/");var e=dynamo.toolbox.cookie.get("dynamo_debug_"+dynamo.toolbox.get_zbid());("debug"in dynamo_options&&dynamo_options.debug||"1"==e)&&(dynamo.setting.debug=!0),dynamo.setting.debug&&"console"in window&&"log"in console||(dynamo.toolbox.log=function(){return!1}),$(window).on("resize scroll",function(){dynamo.tip.growl.updatePos(),dynamo.tip.prompt.reposition(),dynamo.tip.tooltip.reposition()}),$.fn.slideFadeToggle=function(e,t,o){return this.animate({opacity:"toggle",height:"toggle"},e,t,o)},dynamo.toolbox.password.hide();var t=dynamo.toolbox.query_data();$.zb.logged_in?"posted"in t&&"xc"in t&&t.posted.length&&t.xc.length?dynamo.toolbox.users.get_info(dynamo.toolbox.get_zbid(),function(e){t=$.extend(t,{new_posts:e.posts}),dynamo.module.server_call(1,t)}):dynamo.module.server_call(1,t):dynamo.module.server_call(4,t)},query_data:function(){var e=dynamo.toolbox.setup_posting(),t=[],o=[],n=[],a={id:""};if($("a[href*="+main_url+"profile/]").filter(function(){return/profile\/\d+/.test($(this).attr("href"))}).each(function(){$(this).attr("href");t[t.length]=/\/profile\/(\d+)\/?/.exec($(this).attr("href"))[1]}),$("a[href*="+main_url+"topic/]").each(function(){n[n.length]=/topic\/(\d+)\/?/.exec($(this).attr("href"))[1]}),$("a[href*="+main_url+"single/]").each(function(){o[o.length]=/p=(\d+)/.exec($(this).attr("href"))[1],n[n.length]=/t=(\d+)/.exec($(this).attr("href"))[1]}),location.href.match(/profile\/[\d+|admin]/)&&!$("tr.generic").size()){var i=/mid=(\d+)/.exec($("a[href*='mid=']:first").attr("href"))[1];a={id:"profile",zbid:i},t[t.length]=i}if(location.href.match(/\/topic\/(\d+)\/?/)){var d=RegExp.$1;a={id:"topic",tid:d},n[n.length]=RegExp.$1}if(location.href.match(/\/single\//)){var s=/p=(\d+)/.exec(location.href)[1],d=/t=(\d+)/.exec(location.href)[1];a={id:"single",pid:s,tid:d},o[o.length]=s,n[n.length]=d}/^(\/\w+)?\/index/.test(location.pathname)&&(a={id:"index"});var r=$("#stats_members a[href="+main_url+"profile/"+dynamo.toolbox.get_zbid()+"/]");r.size()&&(e=$.extend(e,{username_style:r.html()})),t=dynamo.toolbox.remove_duplicates(t),o=dynamo.toolbox.remove_duplicates(o),n=dynamo.toolbox.remove_duplicates(n);var l=dynamo.toolbox.cookie.get("dynamo_post_"+dynamo.toolbox.get_zbid()),m=dynamo.toolbox.cookie.get("dynamo_xc_"+dynamo.toolbox.get_zbid());l.length&&m.length&&(e=$.extend(e,{posted:l,xc:m})),e=$.extend(e,{zbids:t,pids:o,tids:n,page:a}),dynamo.page=a;var p=dynamo.toolbox.cookie.get("dynamo_referral_"+dynamo.toolbox.get_zbid());return p.length&&(e=$.extend(e,{referrer:p})),e},setup_posting:function(){var e=$("form[action="+main_url+"post/]"),t=!1;if(e.find("textarea:first").after('<input type="hidden" name="dynamo_xc" />'),e.size()){t=!0;var o=[e.find("input[name=title]"),e.find("#c_post-text"),e.find("#fast-reply textarea")],n=+e.find("input[name=mode]").val();1===n?e.submit(function(){var e=$.trim(o[0].val()),t=$.trim(o[1].val());0===e.length||0===t.length||dynamo.toolbox.cookie.set("dynamo_post_"+dynamo.toolbox.get_zbid(),1)}):2===n&&e.submit(function(){var e=o[1].size()?1:2,t=o[e],n=$.trim(t.val());0===n.length||dynamo.toolbox.cookie.set("dynamo_post_"+dynamo.toolbox.get_zbid(),2)})}return t?{posting:!0}:{}},ini_return:function(e){dynamo.server=e;
for(var t in dynamo.server.modules)dynamo.server.modules[t].user_mods=dynamo.server.modules[t].user_mods||{};var o=function(){dynamo.toolbox.menu.add_modules(),location.href==main_url+"members?dynamo=1"&&dynamo.tip.prompt.ini(".dynamo_acp_groups")};if(dynamo.toolbox.cookie.set("dynamo_admin_"+dynamo.toolbox.get_zbid(),e.group.admin),"posted"in e&&(dynamo.toolbox.cookie.del("dynamo_xc_"+dynamo.toolbox.get_zbid()),dynamo.toolbox.cookie.del("dynamo_post_"+dynamo.toolbox.get_zbid())),"ad"in e){var n=e.ad,a={image:"http://dynamo.viralsmods.com/images/aff"+(Math.round(Math.random())+1)+".gif",link:"http://dynamo.viralsmods.com/extras.php"},i=$("<div style='text-align:center;padding:5px;'>");switch(n.type){case 1:i.html('<img src="'+n.image+'" alt="" width="88px" height="31px" />'),i.find("img").on("click",function(){$(this).unbind("click"),dynamo.module.server_call(2,{m:"advert",info:{cid:n.cid}})}),$("#foot_wrap").prepend(i);break;case 2:i.html('<img src="'+a.image+'" alt="" width="88px" height="31px" />'),$("#foot_wrap").prepend(i)}i.find("img").css("cursor","pointer")}if("xc"in e&&($("form input[name=dynamo_xc]").val(e.xc),dynamo.toolbox.cookie.set("dynamo_xc_"+dynamo.toolbox.get_zbid(),e.xc),dynamo.toolbox.users.get_info(dynamo.toolbox.get_zbid(),function(e){dynamo.module.server_call(2,{m:"update_post",info:{posts:e.posts}})})),dynamo.toolbox.update_profiles(e),!location.href.match(/\/msg\//)){var d={},s=+$("#menu_pm a strong").text();if($("#pmtoast").size()){var r=$("#pmlink"),l=r.find("strong");d=r.find("strong").size()?{title:"New Message - "+l.eq(1).text(),message:'<a href="'+$("#pmlink").prop("href")+'">Click here to read the PM from <strong>'+l.eq(0).text()+"</strong> sent "+l.eq(2).text()+".</a>"}:{title:r.find("big").text(),message:'<a href="'+main_url+'msg/">Click here to view your inbox.</a>'}}else s>0&&(d={title:"You have "+s+" new message"+(1==s?"":"s"),message:'<a href="'+main_url+'msg/">Click here to view your inbox.</a>'});"title"in d&&dynamo.tip.growl.show(d)}dynamo.module.load_returns(e),1==e.login?(o(),$("body").trigger("dynamo_loaded")):2==e.login?dynamo.toolbox.password.store(e.password,o):3==e.login?dynamo.toolbox.password.store(e.password,o):4==e.login?dynamo.module.attempts--:dynamo.toolbox.cookie.del("dynamo_password_"+dynamo.toolbox.get_zbid())},guest_return:function(e){dynamo.server=e,dynamo.module.load_returns(e)},update_profiles:function(e){if("users"in e){var t,o,n,a,i,d,s,r=e.users,l=r.length,m=function(e,t,o,n,a){var i="",d=o;switch(e){case"currency":switch(t){case"money":i=dynamo.server.modules.currency.settings.name+": ";var s=dynamo.toolbox.get_zbid()==n?"":"<span class=\"dynamo_donate_link\">[<a href=\"javascript:dynamo.tip.prompt.ini('.dynamo_currency_donate', {c : 'user', zbids : ["+n+"], info : {instant : "+n+'}});">Send</a>]</span>';d=dynamo.server.group.admin>0?"<a href=\"javascript:dynamo.tip.prompt.ini('.dynamo_currency_acp_user', {c : 'form', zbids : ["+n+"], info : {zbid : "+n+'}});">'+dynamo.server.modules.currency.settings.symbol+dynamo.toolbox.format_number(o)+"</a>"+s:dynamo.server.modules.currency.settings.symbol+o+s}break;case"level":switch(t){case"level_1":i=dynamo.server.modules.level.settings.level_name+": ",d=dynamo.toolbox.format_number(o);break;case"exp_1":i=dynamo.server.modules.level.settings.exp_name+": ",d='<progress class="dynamo_level_experience" max="100" value="'+o+'"></progress>';break;case"exp_2":i=dynamo.server.modules.level.settings.exp_name+": ",d=dynamo.toolbox.format_number(o)}break;case"post":switch(t){case"points":var r=a.post.position;r=0==r?"":" (#"+dynamo.toolbox.format_number(r)+")",i=dynamo.server.modules.post.settings.points_name+": ",d=dynamo.toolbox.format_number(o,dynamo.server.modules.post.settings.decimals)+r;break;default:i="",d=""}}return[i,d]};if("topic"==dynamo.page.id)var p=function(e,t,o,n,a){var i=m(e,t,o,n,a),d=$("table.topic .c_username a[href="+main_url+"profile/"+n+"/]");d.each(function(){for(var o=0,a=$(this).closest("tr");void 0===a.attr("id")||1==a.attr("id").split("post-").length||0==o++;){if(0!=a.find(".user_info").size()){a=a.find(".user_info:first");break}if(a=a.next(),o>=10)break}a.next().size()&&a.next().is(".dynamo_user_info")||(a.after('<dl class="user_info dynamo_user_info"><dd class="spacer"></dd></dl>'),a.next().data("zbid",n)),a=a.next(),a.find(".spacer").before('<dt class="dynamo_user_info_label">'+i[0]+'</dt><dd class="dynamo_user_info_val dynamo_'+e+"_"+t+"_"+n+'">'+i[1]+"</dd>")})};else if("single"==dynamo.page.id)var p=function(e,t,o,n,a){var i=m(e,t,o,n,a),d=0,s=$("table.topic .c_username a[href="+main_url+"profile/"+n+"/]");if(s.size()>0){for(s=s.closest("tr");void 0===s.attr("id")||1==s.attr("id").split("post-").length||0==d++;){if(0!=s.find(".user_info").size()){s=s.find(".user_info:first");break}if(s=s.next(),d>=10)break}s.next().size()&&s.next().is(".dynamo_user_info")||(s.after('<dl class="user_info dynamo_user_info"><dd class="spacer"></dd></dl>'),s.next().data("zbid",n)),s=s.next(),s.find(".spacer").before('<dt class="dynamo_user_info_label">'+i[0]+'</dt><dd class="dynamo_user_info_val dynamo_'+e+"_"+t+"_"+n+'">'+i[1]+"</dd>")}};else if("profile"==dynamo.page.id)var c=/mid=(\d+)/.exec($("a[href*='mid=']:first").attr("href"))[1],p=function(e,t,o,n,a){if(n!=c)return!1;var i=m(e,t,o,n,a);$("dl.dynamo_user_info").size()||($("dl.user_info:first").after('<dl class="user_info dynamo_user_info"><dd class="spacer"></dd></dl>'),$("dl.dynamo_user_info").data("zbid",n)),$("dl.dynamo_user_info .spacer").before('<dt class="dynamo_user_info_label">'+i[0]+'</dt><dd class="dynamo_user_info_val dynamo_'+e+"_"+t+"_"+n+'">'+i[1]+"</dd>")};else var p=function(){return!1};for($(".dynamo_user_info_label, .dynamo_user_info_val").remove(),t=0;l>t;t++){o=r[t],n=o.config;for(a in n){i=n[a];for(d in i)s=i[d],p(a,d,s,o.zbid,n)}}}},menu:{preload:function(){var e='<li id="dynamo_drop"><a href="javascript:void();">User CP <strong><small>0</small></strong></a><ul>';e+='<li><a href="javascript:void();">Loading...</a></li>',e+="</ul></li>",$("#top_menu").append(e)},add_modules:function(){var e=$("#dynamo_drop ul:first");e.empty();var t,o="";for(var n in dynamo.server.modules)t=dynamo.server.modules[n],t.menu.length&&(o+="<li><a href=\"javascript:dynamo.tip.prompt.ini('.dynamo_"+t.id+"_"+t.menu+"');\">"+t.name+"</a></li>");e.html(o)}},debug:{on:function(){dynamo.toolbox.cookie.set("dynamo_debug_"+dynamo.toolbox.get_zbid(),1),dynamo.tip.preloaded.show(41)},off:function(){dynamo.toolbox.cookie.del("dynamo_debug_"+dynamo.toolbox.get_zbid()),dynamo.tip.preloaded.show(42)}},remove_duplicates:function(e){var t=[];return $.each(e,function(e,o){-1==$.inArray(o,t)&&t.push(o)}),t},password:{store:function(e,t){$.get(main_url+"msg/?c=10",function(o){var n=0;if($("input[name=new_folder]",o).each(function(){return/^dd\/\/(.{8})$/.test($(this).val())&&RegExp.$1!=e?(n++,dynamo.tip.growl.show({message:"Dynamo has to reload the page to make some crucial changes to your account. Please be patient.",title:"Notice"}),$(this).closest("td").next().find("a").click(),!1):void 0}),0==n){var a=$("#pm_folder_add",o).parent().find("input[name=xc]").val();passcode="dd//"+e,$.post(main_url+"msg/?c=10&sd=1",{xc:a,new_folder:passcode},function(){dynamo.toolbox.cookie.set("dynamo_password_"+dynamo.toolbox.get_zbid(),e,365),dynamo.toolbox.log("new member to dynamo"),t()})}})},pin:{prompt:function(){dynamo.form.create("#dynamo_account-frozen",{tooltips:!0,position:{my:"right center",at:"left center"},fields:[{field:{type:"input",spec:"number",name:"pin"},content:{label:"4 Digit Pin"},rules:{required:!0,minlength:4,maxlength:4,min:1e3,max:9999}}],submit:{to_call:function(e){$("#dynamo_account-frozen").html("Loading...").next().remove(),dynamo.tip.growl.updatePos(),dynamo.module.server_call(3,{info:{pin:e.pin}})},value:"Submit",inline:!1}}),dynamo.tip.growl.updatePos()}},hide:function(){var e=dynamo.toolbox.cookie.get("dynamo_password_"+dynamo.toolbox.get_zbid());e.length>0&&($("#pm_folderlist li").each(function(){$(this).find("a").html()=="dd//"+e&&$(this).remove()}),$("#pm_inbox select[name=new] option").each(function(){$.trim($(this).text())==="dd//"+e&&$(this).remove()}),$("#pm_inbox select[name=new] option").size()||$("#pm_inbox select[name=new]").closest(".left").empty(),$("#pm_folder_editing tbody tr input[name=new_folder][value='dd//"+e+"']").each(function(){$(this).closest("tr").remove()}),$("#pm_folder_editing tbody tr").size()||$("#pm_folder_editing").hide(),$("select option:contains(dd//"+e+")").remove())}},users:{stored:{},get_info:function(e,t){"zbid-"+e in dynamo.toolbox.users.stored?(user_info=dynamo.toolbox.users.stored["zbid-"+e],t(user_info)):$.get(main_url+"profile/"+e+"/",function(o){holder=$("dl.user_info",o),user_info={posts:$.trim(dynamo.toolbox.strip_number(holder.find("dt:contains(Posts):eq(0)").next().text())),group:$.trim(holder.find("dt:contains(Group):eq(0)").next().text())},dynamo.toolbox.users.stored["zbid-"+e]=user_info,t(user_info)})}},get_username:function(){return null===dynamo.username&&(dynamo.username=$("#top_info a[href*=/profile/]").text()),dynamo.username},get_zbid:function(){return null===dynamo.zbid&&(dynamo.zbid=$.zb.logged_in?parseInt($.zb.stat.mid,10):location.host),dynamo.zbid},get_gid:function(){return null===dynamo.gid&&(dynamo.gid=parseInt($.zb.stat.gid,10)),dynamo.gid},send_pm:function(e,t){dynamo.toolbox.log("Sending PM, data:",e),$.get(main_url+"msg/?c=2&force_ads",function(o){var n=$(o).find("form[name=posting]");n.find("input[name=name]").val(e.username),n.find("input[name=title]").val("title"in e?e.title:"No Title"),n.find("#c_post-text").val("message"in e?e.message:"No message.");var a=n.serializeArray();t=dynamo.toolbox.is_defined(t)?t:function(){},$.post(main_url+"msg/?c=3&sd=1&force_ads",a,t)})},in_array:function(e,t){var o="string"===$.type(e);e=o?e.toLowerCase():e;for(var n,a=0;a<t.length;a++)if(n=o?t[a].toLowerCase():t[a],n==e)return!0;return!1},cookie:{set:function(e,t){return $.zb.set(e,t)},get:function(e){return $.zb.get(e)},del:function(e){return $.zb.del(e)}},strip_number:function(e){return"settings"in dynamo&&"money_thousand_sep"in dynamo.settings?+(""+e).replace(new RegExp(dynamo.settings.money_thousand_sep,"g"),""):+(""+e).replace(/[^\d]/g,"")},format_number:function(e,t){t=void 0!==t&&null!==t?t:0,e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+e)?+e:0,n=isFinite(+t)?Math.abs(t):0,a="undefined"==typeof thousands_sep?",":thousands_sep,i="undefined"==typeof dec_point?".":dec_point,d="",s=function(e,t){var o=Math.pow(10,t);return""+Math.round(e*o)/o};return d=(n?s(o,n):""+Math.round(o)).split("."),d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(d[1]||"").length<n&&(d[1]=d[1]||"",d[1]+=new Array(n-d[1].length+1).join("0")),d.join(i)},time_string:function(e,t){e=+e;var o=Math.max(1,1==t?e:Math.abs(dynamo.time-e));if(15>o&&(2==t||3==t))return"Just now";if(o>604800&&(2==t||3==t))return new Date(1e3*e).toDateString();var n=Math.floor(o/31536e3),a=Math.floor(o/86400%365),i=Math.floor(o/3600%24),d=Math.floor(o/60%60),s=o%60,r=[];if(n>0&&(r[r.length]=dynamo.toolbox.format_number(n)+" year"+(1==n?"":"s")),a>0&&1>=n&&(r[r.length]=a+" day"+(1==a?"":"s")),i>0&&7>=a&&!n&&(r[r.length]=i+" hour"+(1==i?"":"s")),1>=a&&(d>0&&!a&&(r[r.length]=d+" minute"+(1==d?"":"s")),s>0&&!i&&!a&&(r[r.length]=s+" second"+(1==s?"":"s"))),r.length>1){var l=r[r.length-1];r.pop(),r=r.join(", ")+" and "+l}else r=r.join("");return r+(1==t?"":2==t?" ago":"")},possession:function(e){return"s"==e.charAt(e.length-1)?e+"'":e.substr(0,e.length)+"'s"},plural:function(e){return"y"==e.charAt(e.length-1)?e.substr(0,e.length-1)+"ies":e+"s"},lowercase:function(e){return e.toUpperCase()===e?e:e.toLowerCase()},is_defined:function(e,t){return t=t||!1,"undefined"!=typeof e&&(t||null!==e)},log:function(){if("console"in window&&"log"in console)for(var e=0;e<arguments.length;e++)console.log(arguments[e])},bbcode:function(e){return e=e.replace(/\[main\]/g,main_url),e=e.replace(/\[url=([^\]]+)\]([^\[]+)\[\/url\]/g,'<a href="$1">$2</a>'),e=e.replace(/\[url]([^\[]+)\[\/url\]/g,'<a href="$1">$1</a>'),e=e.replace(/\[b\]([^\[]+)\[\/b\]/g,"<strong>$1</strong>"),e=e.replace(/\[i\]([^\[]+)\[\/i\]/g,"<em>$1</em>")},dynamic_text_replace:function(e,t){t=dynamo.toolbox.is_defined(t)?t:{};for(var o,n;/\%DATA\[([a-zA-Z_,\|0-9]+)\]\%/.test(e);){if(o=RegExp.$1,o=o.split(","),n=o[0]in t?t[o[0]]:"N/A",o.length>0)switch(o[1]){case"number":n=dynamo.toolbox.format_number(n);break;case"time":n=dynamo.toolbox.time_string(n,1);break;case"split":n=n.split(o[2])[+o[3]]}e=e.replace(/\%DATA\[([a-zA-Z_,\|0-9]+)\]\%/,n)}var a;e:for(;/\%MODULE\[([a-zA-Z_,]+)\]\%/.test(e);){for(o=RegExp.$1,o=o.split(","),a=dynamo.server.modules,i=0;i<o.length;i++){if(!(o[i]in a)){e=e.replace(/\%MODULE\[([a-zA-Z_,]+)\]\%/,"");continue e}a=a[o[i]]}e=e.replace(/%MODULE\[(\S+)\]%/,"string"==typeof a?a:"")}return e=dynamo.toolbox.bbcode(e),e=e.replace(/%ADMIN%(.*)%ADMIN%/g,$.zb.admin?"$1":"")}},user_mods:{}};dynamo.toolbox.ini();